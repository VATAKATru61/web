{% extends "base.html" %}
{% block title %}–û–ø–ª–∞—Ç—ã | FAST VPN{% endblock %}
{% block extra_css %}
<link rel="stylesheet" href="/static/css/table.css">
{% endblock %}

{% block header %}
<div class="page-header">
    <h1>
        <i class="fas fa-credit-card"></i>
        –û–ø–ª–∞—Ç—ã
    </h1>
    <p class="page-subtitle">–í—Å–µ–≥–æ: {{ payments|length }}</p>
</div>
{% endblock %}

{% block content %}
<div class="table-container">
    <div class="search-container">
        <input type="text" id="searchPaymentInput" class="search-input" placeholder="üîç –ü–æ–∏—Å–∫ –ø–æ ID, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é, –∫–∞—Å—Å–µ –∏–ª–∏ —Å—É–º–º–µ...">
    </div>
    <table class="data-table" id="paymentsTable">
        <thead>
            <tr>
                <th>ID –æ–ø–ª–∞—Ç—ã</th>
                <th>Telegram ID</th>
                <th>–°—É–º–º–∞</th>
                <th>–ö–∞—Å—Å–∞</th>
                <th>–î–∞—Ç–∞</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
            </tr>
        </thead>
        <tbody>
            {% for p in payments %}
            <tr>
                <td>{{ p.id }}</td>
                <td>{{ p.tg_id }}</td>
                <td>{{ p.amount }}</td>
                <td>{{ p.provider }}</td>
                <td>{{ p.created_at }}</td>
                <td>{{ p.status }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
<script>
document.getElementById('searchPaymentInput').addEventListener('input', function() {
  const q = this.value.toLowerCase();
  document.querySelectorAll('#paymentsTable tbody tr').forEach(row => {
    const cells = Array.from(row.cells);
    row.style.display = cells.some(td => td.textContent.toLowerCase().includes(q)) ? '' : 'none';
  });
});
</script>
{% endblock %}